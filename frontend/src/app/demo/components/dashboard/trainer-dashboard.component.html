<div class="grid">
    <div class="col-12">
        <div class="card">
            <div>
                <h5>{{ 'dashboard.trainer' | translate }}</h5>
                <p>{{ 'dashboard.welcome.trainer' | translate }}</p>
            </div>
        </div>
    </div>
</div>

<div class="grid">
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <span class="block text-500 font-medium mb-3">{{ 'trainer.myFormations' | translate }}</span>
                    <div class="text-900 font-medium text-xl">{{ myFormations.length }}</div>
                </div>
                <div class="flex align-items-center justify-content-center bg-blue-100 border-round" style="width:2.5rem;height:2.5rem">
                    <i class="pi pi-book text-blue-500 text-xl"></i>
                </div>
            </div>
            <span class="text-green-500 font-medium">{{ upcomingFormations.length }} {{ 'stats.upcoming' | translate }}</span>
            <span class="text-500"> {{ 'stats.thisWeek' | translate }}</span>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <span class="block text-500 font-medium mb-3">{{ 'trainer.totalStudents' | translate }}</span>
                    <div class="text-900 font-medium text-xl">{{ totalStudents }}</div>
                </div>
                <div class="flex align-items-center justify-content-center bg-orange-100 border-round" style="width:2.5rem;height:2.5rem">
                    <i class="pi pi-users text-orange-500 text-xl"></i>
                </div>
            </div>
            <span class="text-green-500 font-medium">{{ 'stats.active' | translate }}</span>
            <span class="text-500"> {{ 'trainer.activeInFormation' | translate }}</span>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <span class="block text-500 font-medium mb-3">{{ 'trainer.attendanceRate' | translate }}</span>
                    <div class="text-900 font-medium text-xl">{{ averageAttendance }}%</div>
                </div>
                <div class="flex align-items-center justify-content-center bg-cyan-100 border-round" style="width:2.5rem;height:2.5rem">
                    <i class="pi pi-chart-line text-cyan-500 text-xl"></i>
                </div>
            </div>
            <span class="text-green-500 font-medium">{{ 'stats.averageOfMyFormations' | translate }}</span>
            <span class="text-500"> {{ 'trainer.averageOfMyFormations' | translate }}</span>
        </div>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
            <div class="flex justify-content-between mb-3">
                <div>
                    <span class="block text-500 font-medium mb-3">Formations Terminées</span>
                    <div class="text-900 font-medium text-xl">{{ completedFormations.length }}</div>
                </div>
                <div class="flex align-items-center justify-content-center bg-green-100 border-round" style="width:2.5rem;height:2.5rem">
                    <i class="pi pi-check-circle text-green-500 text-xl"></i>
                </div>
            </div>
            <span class="text-green-500 font-medium">Complétées</span>
            <span class="text-500"> avec succès</span>
        </div>
    </div>
</div>

<div class="grid">
    <div class="col-12 xl:col-6">
        <div class="card">
            <h5>{{ 'actions.quick' | translate }}</h5>
            <div class="grid">
                <div class="col-6">
                    <button pButton pRipple type="button"
                            [label]="'actions.myFormations' | translate"
                            icon="pi pi-book"
                            class="p-button-success w-full mb-3"
                            (click)="navigateToMyFormations()"></button>
                </div>
                <div class="col-6">
                    <button pButton pRipple type="button"
                            [label]="'actions.presences' | translate"
                            icon="pi pi-check-square"
                            class="p-button-info w-full mb-3"
                            (click)="navigateToAttendance()"></button>
                </div>
                <div class="col-6">
                    <button pButton pRipple type="button"
                            [label]="'actions.documents' | translate"
                            icon="pi pi-file"
                            class="p-button-warning w-full mb-3"
                            (click)="navigateToDocuments()"></button>
                </div>
                <div class="col-6">
                    <button pButton pRipple type="button"
                            [label]="'actions.reports' | translate"
                            icon="pi pi-chart-bar"
                            class="p-button-secondary w-full mb-3"
                            (click)="navigateToReports()"></button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-12 xl:col-6">
        <div class="card">
            <h5>Formations à Venir</h5>
            <div *ngIf="upcomingFormations.length === 0" class="text-center p-4">
                <i class="pi pi-info-circle text-4xl text-blue-500 mb-3"></i>
                <p class="text-500">Aucune formation programmée pour le moment.</p>
            </div>
            <div *ngFor="let formation of upcomingFormations" class="border-bottom-1 surface-border py-3">
                <div class="flex justify-content-between align-items-center">
                    <div>
                        <h6 class="mb-1">{{ formation.name }}</h6>
                        <p class="text-500 mb-0">{{ formation.date | date:'dd/MM/yyyy' }} - {{ formation.duree }}h</p>
                    </div>
                    <div class="flex gap-2">
                        <button pButton pRipple type="button" 
                                icon="pi pi-eye" 
                                class="p-button-text p-button-sm"
                                pTooltip="Voir détails"
                                (click)="viewFormationDetails(formation)"></button>
                        <button pButton pRipple type="button" 
                                icon="pi pi-check-square" 
                                class="p-button-text p-button-sm"
                                pTooltip="Marquer présences"
                                (click)="markAttendance(formation)"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
